# 钢材采购损耗率估算系统 - 使用指南

### 1. 设计钢材管理

**方法A：Excel/CSV文件上传**
1. 准备Excel或CSV文件，格式如下：
   ```
   长度,数量,截面面积
   1500,20,100
   1800,15,100
   2000,25,100
   ```
2. 点击"选择文件"按钮
3. 选择您的文件并上传
4. 系统会自动解析并显示钢材列表

**方法B：手动添加**
1. 在"手动添加设计钢材"区域填写：
   - 长度(mm)
   - 数量(件)
   - 截面面积(mm²)
2. 点击"添加"按钮
3. 系统会自动分配编号(如A1, A2, B1, B2等)

### 2. 模数钢材管理

1. 在"模数钢材管理"区域添加可用的原材料
2. 填写：
   - 名称(如：Q235-6000)
   - 长度(mm)
3. 点击"添加模数钢材"

**建议的标准模数钢材：**
- Q235-6000 (6000mm)
- Q235-9000 (9000mm)
- Q235-12000 (12000mm)

### 3. 优化参数设置

- **废料阈值S(mm)**: 小于此值的余料视为废料，建议500mm以上，具体以实际为准
- **预期损耗率(%)**: 预期的损耗率，建议5%
- **计算时间限制(秒)**: 算法运行时间，建议30秒

### 4. 开始优化计算

1. 确保已添加设计钢材和模数钢材
2. 设置好优化参数
3. 点击"开始优化"按钮
4. 等待计算完成(通常几秒钟)

### 5. 查看结果

计算完成后可以查看：
- **统计信息**: 损耗率、使用的模数钢材数量等
- **图表分析**: 损耗率趋势图、截面面积分布图
- **详细结果**: 每根模数钢材的切割方案
- **需求验证**: 确认所有需求是否满足

### 6. 导出结果

点击"导出Excel"按钮可以导出详细的优化结果到Excel文件。

## 📁 测试数据

系统提供了测试数据文件：
- `test_design_steels.csv` - 包含20种设计钢材的测试数据
- `sample_design_steels.csv` - 简化版测试数据

您可以直接上传这些文件进行测试。

## 🛠️ 常见问题解决

### 问题1：端口被占用
**错误信息**: "Error: listen EADDRINUSE: address already in use :::5000"

**解决方案**:
```bash
# 查找占用端口的进程
netstat -ano | findstr :5000
netstat -ano | findstr :3000

# 结束占用进程(替换PID为实际进程ID)
taskkill /PID <进程ID> /F

# 或者结束所有Node进程
taskkill /f /im node.exe
```

### 问题2：前端无法启动
**错误信息**: "Module not found: Error: Can't resolve './App'"

**解决方案**:
```bash
cd C:\hgj313\client
npm install
npm start
```

### 问题3：系统无响应
1. 检查浏览器控制台是否有错误
2. 确认前后端服务都在运行
3. 尝试刷新页面
4. 重启系统服务

## 🔄 系统停止

**停止方法**:
1. 在运行npm start的命令窗口中按 `Ctrl + C`
2. 或者直接关闭命令窗口

**强制停止所有Node进程**:
```bash
taskkill /f /im node.exe
```

## 📊 系统功能特点

✅ **文件上传**: 支持Excel/CSV格式的设计钢材数据导入
✅ **自动编号**: 按截面面积和长度自动生成A1、A2、B1、B2等编号
✅ **智能优化**: 采用First Fit Decreasing算法，最小化材料浪费
✅ **余料利用**: 自动将可用余料用于相同截面积的后续切割
✅ **实时计算**: 快速计算优化方案，通常数秒内完成
✅ **可视化展示**: 提供图表和表格多种结果展示方式
✅ **需求验证**: 自动验证生产数量是否满足设计需求
✅ **结果导出**: 支持导出Excel格式的详细报告


## 🎯 使用建议

1. **首次使用**: 建议先用测试数据文件试运行
2. **数据准备**: 确保Excel/CSV文件格式正确，包含必要的三列数据
3. **参数设置**: 根据实际需求调整废料阈值和预期损耗率
4. **结果验证**: 每次计算后都要检查需求满足情况
5. **定期备份**: 重要的计算结果建议导出保存

---

**系统版本**: v2.0
**最后更新**: 2025年6月10日
